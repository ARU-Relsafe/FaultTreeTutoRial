<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Tutorial: FaultTree Package</title>
  <meta name="description" content="Tutorial for the FaultTree package from www.openreliability.org">
  <meta name="generator" content="bookdown 0.3.8 and GitBook 2.6.7">

  <meta property="og:title" content="Tutorial: FaultTree Package" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="www/cover.jpg" />
  <meta property="og:description" content="Tutorial for the FaultTree package from www.openreliability.org" />
  <meta name="github-repo" content="CarlesCG/FaulttReeTutoRial" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Tutorial: FaultTree Package" />
  
  <meta name="twitter:description" content="Tutorial for the FaultTree package from www.openreliability.org" />
  <meta name="twitter:image" content="www/cover.jpg" />

<meta name="author" content="David J. Silkworth">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="basics.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">FaultTree Tutorial</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome To FaultTree Tutorial</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#getting-started-with-faulttree-on-r"><i class="fa fa-check"></i><b>1.1</b> Getting started with FaultTree on R</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#load-faultree-package"><i class="fa fa-check"></i><b>1.2</b> Load FaulTree package</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>2</b> Fault Tree Basics</a></li>
<li class="chapter" data-level="3" data-path="non-repairable.html"><a href="non-repairable.html"><i class="fa fa-check"></i><b>3</b> Non-Repairable System Models</a></li>
<li class="chapter" data-level="4" data-path="cut-set.html"><a href="cut-set.html"><i class="fa fa-check"></i><b>4</b> Cut Set Analysis</a></li>
<li class="chapter" data-level="5" data-path="repairable.html"><a href="repairable.html"><i class="fa fa-check"></i><b>5</b> Repairable System Models</a></li>
<li class="chapter" data-level="6" data-path="latent-events.html"><a href="latent-events.html"><i class="fa fa-check"></i><b>6</b> Latent Component Events</a><ul>
<li class="chapter" data-level="6.1" data-path="latent-events.html"><a href="latent-events.html#using-the-r-environment-to-alter-inspection-intervals"><i class="fa fa-check"></i><b>6.1</b> Using the R Environment to Alter Inspection Intervals</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="conditional-sequence.html"><a href="conditional-sequence.html"><i class="fa fa-check"></i><b>7</b> Conditional Sequence</a></li>
<li class="divider"></li>
<li><a href="http://www.openreliability.org" target="blank">Openreliability.org</a></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tutorial: FaultTree Package</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intro" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Introduction</h1>
<div id="getting-started-with-faulttree-on-r" class="section level2">
<h2><span class="header-section-number">1.1</span> Getting started with FaultTree on R</h2>
<p>This introduction will cover installation of R and the FaultTree package. R has been selected as the container environment for this open source Fault Tree Analysis software. R is an excellent prototyping environment, although it is not known for its user friendliness. This introduction will hopefully get tentative users off to a running start. Although R is multi-platform environment, this introduction will be made from a Windows user perspective.</p>
<div class="figure">
<img src="www/01-Rfundation.jpg" />

</div>
<p>A Windows installer for the R environment is available for free download starting at <a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a></p>
<p>Select the download link, then choose a mirror (the first selection always works for me). Here you will view the download links for the three supported operating systems. It does not matter which version of Windows you are using. On a 32-bit installation you will get a 32-bit R system. On a 64-bit system you will get both the 32-bit and the 64-bit installation. Don’t worry it doesn’t really matter which one you use. We are only concerned with a base installation, click on the ‘install R for the first time’ link.</p>
<p>It is fine to install with default conditions, however, this creates an MDI application where multiple instances can run in a single container. I find this uncomfortable and prefer the SDI format. Want to try again? Uninstall through the ControlPanel and re-run the installer. This time select a ‘custom installation’, which will give you a chance to install the SDI format. All the other defaults are fine.</p>
<center>
<img src="www/01-rstudiologo.png" />
</center>
<p>I should mention here that there is a further developer environment that some prefer called R Studio. This application gives an unabashed look and feel of MatLab to R. This is also available as a free download at <a href="https://www.rstudio.com/products/RStudio/" class="uri">https://www.rstudio.com/products/RStudio/</a></p>
<p>The remainder of this introduction will refer to the simplest R SDI installation. Really we don’t need to know much about the R programming language to use FaultTree. Most people find R to have a very steep learning curve, largely due to the stark terminal window that it opens up to. This introduction hopes to guide any first-time user to success.</p>
<p>FaultTree is a package that must be loaded into R. The package is hosted at R-Forge : <a href="https://r-forge.r-project.org/" class="uri">https://r-forge.r-project.org/</a> From that location navigation would be required by search of Project – ftree. From that location one must select the R Packages link just below the Fault Tree and Event Tree Analysis title button. Or for those in a rush, just load the following URL: <a href="https://r-forge.r-project.org/R/?group_id=2125" class="uri">https://r-forge.r-project.org/R/?group_id=2125</a> Yes, there is more than one package addressed here. We of course want FaultTree. There are two ways to load this package into your R installation I will walk through both. You can download the .zip file next to the Windows logo. But, do not unzip this as one might expect! Rather, we will open this using the R environment. Run an R instance – as administrator. This is usually accomplished by right clicking on the icon and selecting ‘Run as administrator’. I prefer this since only the administrator can load the package into the main R installation, rather than a separate user library. This is a bit of Linux legacy, but we now have users separate from administrator on Windows since Windows 7. Now, in the R Console select the Packages menu item. Then at the bottom of the dropdown menu select ‘Install package(s) from local zip files…’ Navigate to the location of the downloaded zip from R-forge and open it in R. You should see the following confirmation in the R Console:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">utils:::<span class="kw">menuInstallLocal</span>()
<span class="co"># package ‘FaultTree’ successfully unpacked and MD5 sums checked</span></code></pre></div>
<p>Before continuing, I will mention perhaps an easier method of installation. R-forge provides an automated download and installation command line just underneath the Linux and Windows icons with (.tar.gz) and (.zip) respectively. Generally from the latest version of R (that’s what you have if you just downloaded for the first time) -as administrator - you should be able to just copy and paste the installation command: install.packages(“FaultTree”, repos=“<a href="http://R-Forge.R-project.org" class="uri">http://R-Forge.R-project.org</a>”) directly into the R Console.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;FaultTree&quot;</span>, <span class="dt">repos=</span><span class="st">&quot;http://R-Forge.R-project.org&quot;</span>)</code></pre></div>
<div class="rmdcaution">
<p>
I just tried this with R version 3.3.1 and it did not work because R-Forge had not gotten around to updating the package build (at version 0.0.9) since R version 3.3.0 . So I got a failure message for this reason. However the earlier zip method works on all versions.
</p>
</div>
<p>Alternatively install from GitHub repository:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools::<span class="kw">install_github</span>(<span class="st">&quot;CarlesCG/FaultTree&quot;</span>)</code></pre></div>
<p>This installation operation is only performed once per version of the package. From this point we can use the FaultTree package on each session of R by just mounting the library, which has already been installed in your local file system. This is done by the simple command line directly into the R Console:</p>
</div>
<div id="load-faultree-package" class="section level2">
<h2><span class="header-section-number">1.2</span> Load FaulTree package</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(FaultTree)</code></pre></div>
<p>This command line only needs to be executed once each R session. That is you can simply open either the 32-bit or the 64-bit R icon by double click and enter this library entry. You may get a warning about the package built under a different R version, but this is only a warning of no significance. There is no harm in making the library call repeatedly, it is just not necessary. Many example scripts will include the library line, perhaps as just a reminder.</p>
<p>To conclude this introduction we will run an example. An alternate location for posting of this package source is located on Github: <a href="https://github.com/jto888/FaultTree" class="uri">https://github.com/jto888/FaultTree</a> A README.md file opens below the repository. Simply copy and paste the presented script (repeated below) into the R Console.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tree1&lt;-<span class="kw">ftree.make</span>(<span class="dt">type=</span><span class="st">&quot;priority&quot;</span>,<span class="dt">reversible_cond=</span><span class="ot">TRUE</span>, <span class="dt">name=</span><span class="st">&quot;Site power loss&quot;</span>)
tree1&lt;-<span class="kw">addLogic</span>(tree1, <span class="dt">at=</span><span class="dv">1</span>, <span class="dt">type=</span><span class="st">&quot;or&quot;</span>, <span class="dt">name=</span><span class="st">&quot;neither emergency&quot;</span>, <span class="dt">name2=</span><span class="st">&quot;generator operable&quot;</span>)
tree1&lt;-<span class="kw">addLogic</span>(tree1, <span class="dt">at=</span><span class="dv">2</span>, <span class="dt">type=</span><span class="st">&quot;and&quot;</span>, <span class="dt">name=</span><span class="st">&quot;Independent failure&quot;</span>, <span class="dt">name2=</span><span class="st">&quot;of generators&quot;</span>)
tree1&lt;-<span class="kw">addLatent</span>(tree1, <span class="dt">at=</span><span class="dv">3</span>, <span class="dt">mttf=</span><span class="dv">5</span>,<span class="dt">mttr=</span><span class="dv">12</span>/<span class="dv">8760</span>,<span class="dt">inspect=</span><span class="dv">1</span>/<span class="dv">26</span>, <span class="dt">name=</span><span class="st">&quot;e-gen set fails&quot;</span>)
tree1&lt;-<span class="kw">addLatent</span>(tree1, <span class="dt">at=</span><span class="dv">3</span>, <span class="dt">mttf=</span><span class="dv">5</span>,<span class="dt">mttr=</span><span class="dv">12</span>/<span class="dv">8760</span>,<span class="dt">inspect=</span><span class="dv">1</span>/<span class="dv">26</span>, <span class="dt">name=</span><span class="st">&quot;e-gen set fails&quot;</span>)
tree1&lt;-<span class="kw">addLogic</span>(tree1, <span class="dt">at=</span><span class="dv">2</span>, <span class="dt">type=</span><span class="st">&quot;inhibit&quot;</span>, <span class="dt">name=</span><span class="st">&quot;Common cause&quot;</span>, <span class="dt">name2=</span><span class="st">&quot;failure of generators&quot;</span>)
tree1&lt;-<span class="kw">addProbability</span>(tree1, <span class="dt">at=</span><span class="dv">6</span>, <span class="dt">prob=</span>.<span class="dv">05</span>, <span class="dt">name=</span><span class="st">&quot;Common cause&quot;</span>, <span class="dt">name2=</span><span class="st">&quot;beta factor&quot;</span>)
tree1&lt;-<span class="kw">addLatent</span>(tree1, <span class="dt">at=</span><span class="dv">6</span>, <span class="dt">mttf=</span><span class="dv">5</span>,<span class="dt">mttr=</span><span class="dv">12</span>/<span class="dv">8760</span>,<span class="dt">inspect=</span><span class="dv">1</span>/<span class="dv">26</span>, <span class="dt">name=</span><span class="st">&quot;e-gen set fails&quot;</span>)
tree1&lt;-<span class="kw">addDemand</span>(tree1, <span class="dt">at=</span><span class="dv">1</span>, <span class="dt">mttf=</span><span class="fl">1.0</span>, <span class="dt">name=</span><span class="st">&quot;External power&quot;</span>, <span class="dt">name2=</span><span class="st">&quot;interruption&quot;</span>)
tree1&lt;-<span class="kw">ftree.calc</span>(tree1)
tree1[,<span class="dv">1</span>:<span class="dv">8</span>]</code></pre></div>
<pre><code>##   ID GParent CParent Level Type           CFR           PBF          CRT
## 1  1      -1      -1     1   14  0.0002223396  3.045753e-07  0.001369866
## 2  2       1       1     2   10 -1.0000000000  2.223396e-04  0.001369866
## 3  3       2       2     3   11  0.0016369090  1.688518e-05  0.001369863
## 4  4       3       3     4    2  0.2000000000  4.109158e-03  0.001369863
## 5  5       3       3     4    2  0.2000000000  4.109158e-03  0.001369863
## 6  6       2       2     3   12  0.0100000000  2.054579e-04  0.001369863
## 7  7       6       6     4    4 -1.0000000000  5.000000e-02 -1.000000000
## 8  8       6       6     4    2  0.2000000000  4.109158e-03  0.001369863
## 9  9       1       1     2    3  1.0000000000 -1.000000e+00 -1.000000000</code></pre>
<p>The fault tree exists in R as a dataframe object. We can view most output of interest in just the first 8 columns. Each node of the tree occupies a line of the dataframe and they are sequentially given a numbered ID. The output of calculations are in the CFR, PBF, and CRT columns as explained. CFR is the Conditional Fail Rate PBF is the Probability of Failure (or Failed State) CRT is the Conditional Repair Time (this will only be used on reversible conditions through the Priority AND gate.) In this case all mean time to failure (mttf) and mean time to repair (mttr) values were input as years, so the CFR and CRT are also reported in these units. Probability is of course unit-less.</p>
<p>It is of course more pleasing to view the fault tree as a graphic, and in this regard the FaultTree package will not disappoint. Just add the following lines after the executed script above:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ftree2html</span>(tree1, <span class="dt">write_file=</span><span class="ot">TRUE</span>)</code></pre></div>
<pre><code>##   ID Parent Type           CFR           PBF          CRT Cond
## 1  1     -1   14  0.0002223396  3.045753e-07  0.001369866    0
## 2  2      1   10 -1.0000000000  2.223396e-04  0.001369866    1
## 3  3      2   11  0.0016369090  1.688518e-05  0.001369863    0
## 4  4      3    2  0.2000000000  4.109158e-03  0.001369863    0
## 5  5      3    2  0.2000000000  4.109158e-03  0.001369863    0
## 6  6      2   12  0.0100000000  2.054579e-04  0.001369863    0
## 7  7      6    4 -1.0000000000  5.000000e-02 -1.000000000    1
## 8  8      6    2  0.2000000000  4.109158e-03  0.001369863    0
## 9  9      1    3  1.0000000000 -1.000000e+00 -1.000000000    0
##                  Name                 Name2
## 1     Site power loss                      
## 2   neither emergency    generator operable
## 3 Independent failure         of generators
## 4     e-gen set fails                      
## 5     e-gen set fails                      
## 6        Common cause failure of generators
## 7        Common cause           beta factor
## 8     e-gen set fails                      
## 9      External power          interruption</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">browseURL</span>(<span class="st">&#39;tree1.html&#39;</span>)</code></pre></div>
<p>Now the image below should appear in your default browser. <img src="www/01-ftree1.jpg" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="basics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/CarlesCG/FaulttReeTutoRial/edit/master/01-Introduction.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
